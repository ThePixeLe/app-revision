<!--
  resources.component.html

  Template de la bibliothÃ¨que de ressources.

  Structure :
  ==========

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                       HEADER                                â”‚
  â”‚   ğŸ“š Ressources                    [ğŸ” Recherche]          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚   [Tout] [ğŸ”µ AlgÃ¨bre] [ğŸŸ£ Algo] [ğŸŸ¢ Java] [â­ Favoris]     â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                             â”‚
  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
  â”‚   â”‚ ğŸ“„ PDF            â”‚ â”‚ ğŸ“„ PDF            â”‚              â”‚
  â”‚   â”‚ Titre du doc      â”‚ â”‚ Titre du doc      â”‚              â”‚
  â”‚   â”‚ Description...    â”‚ â”‚ Description...    â”‚              â”‚
  â”‚   â”‚ ğŸ“Š 25 pages       â”‚ â”‚ ğŸ“Š 40 pages       â”‚              â”‚
  â”‚   â”‚ [â­] [ğŸ“¥]        â”‚ â”‚ [â­] [ğŸ“¥]        â”‚              â”‚
  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
  â”‚                                                             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Auteur: H1m0t3p3
  Date: 24 dÃ©cembre 2024
-->

<div class="resources-container">

  <!-- ========================================== -->
  <!-- HEADER -->
  <!-- ========================================== -->
  <header class="resources-header">
    <div class="header-content">
      <h1 class="page-title">ğŸ“š Ressources</h1>
      <p class="page-subtitle">
        Tous les documents de cours pour ta formation
      </p>
    </div>

    <!-- Bouton Ajouter un PDF -->
    <button class="upload-btn" (click)="openUploadModal()">
      <span class="btn-icon">ğŸ“¤</span>
      <span class="btn-text">Ajouter un PDF</span>
    </button>

    <!-- Barre de recherche -->
    <div class="search-bar">
      <span class="search-icon">ğŸ”</span>
      <input
        type="text"
        class="search-input"
        placeholder="Rechercher un document..."
        [(ngModel)]="searchTerm"
        (input)="onSearch()">
      <button
        *ngIf="searchTerm"
        class="clear-btn"
        (click)="searchTerm = ''; onSearch()">
        âœ•
      </button>
    </div>
  </header>

  <!-- ========================================== -->
  <!-- FILTRES PAR CATÃ‰GORIE -->
  <!-- ========================================== -->
  <nav class="category-nav">
    <button
      *ngFor="let cat of categories"
      class="category-btn"
      [class.active]="selectedCategory === cat.id"
      [style.--cat-color]="cat.color"
      (click)="selectCategory(cat.id)">
      <span class="cat-icon">{{ cat.icon }}</span>
      <span class="cat-label">{{ cat.label }}</span>
      <span class="cat-count">{{ cat.count }}</span>
    </button>

    <!-- Bouton favoris -->
    <button
      class="category-btn favorites"
      [class.active]="showFavoritesOnly"
      (click)="toggleFavorites()">
      <span class="cat-icon">â­</span>
      <span class="cat-label">Favoris</span>
      <span class="cat-count">{{ getFavoritesCount() }}</span>
    </button>
  </nav>

  <!-- ========================================== -->
  <!-- CONTENU PRINCIPAL -->
  <!-- ========================================== -->
  <div class="resources-content">

    <!-- Grille de ressources -->
    <div class="resources-grid">

      <!-- Ã‰tat vide -->
      <div *ngIf="filteredResources.length === 0" class="empty-state">
        <span class="empty-icon">ğŸ“­</span>
        <h3>Aucune ressource trouvÃ©e</h3>
        <p *ngIf="searchTerm">Aucun rÃ©sultat pour "{{ searchTerm }}"</p>
        <p *ngIf="!searchTerm && showFavoritesOnly">
          Tu n'as pas encore de favoris. Clique sur â­ pour en ajouter !
        </p>
      </div>

      <!-- Carte de ressource -->
      <article
        *ngFor="let resource of filteredResources"
        class="resource-card"
        [class.favorite]="resource.isFavorite"
        (click)="openResource(resource)">

        <!-- Badge de catÃ©gorie -->
        <div
          class="resource-category-badge"
          [style.background]="getCategoryColor(resource.category)">
          {{ resource.category | titlecase }}
        </div>

        <!-- IcÃ´ne type -->
        <div class="resource-type-icon">
          {{ getTypeIcon(resource.type) }}
        </div>

        <!-- Contenu -->
        <div class="resource-content">
          <h3 class="resource-title">{{ resource.title }}</h3>
          <p class="resource-description">{{ resource.description }}</p>

          <!-- MÃ©tadonnÃ©es -->
          <div class="resource-meta">
            <span class="meta-item" *ngIf="resource.pageCount">
              ğŸ“„ {{ resource.pageCount }} pages
            </span>
            <span class="meta-item" *ngIf="resource.fileSize">
              ğŸ’¾ {{ resource.fileSize }}
            </span>
          </div>
        </div>

        <!-- Actions -->
        <div class="resource-actions">
          <button
            class="action-btn favorite-btn"
            [class.is-favorite]="resource.isFavorite"
            (click)="toggleFavorite(resource, $event)"
            title="Ajouter aux favoris">
            {{ resource.isFavorite ? 'â­' : 'â˜†' }}
          </button>
          <button
            class="action-btn summary-btn"
            (click)="openSummaryModal(resource, $event)"
            title="GÃ©nÃ©rer un rÃ©sumÃ© IA">
            ğŸ¤–
          </button>
          <button
            class="action-btn extract-btn"
            (click)="openExerciseExtractorModal(resource, $event)"
            title="Extraire les exercices">
            ğŸ“
          </button>
          <button
            class="action-btn download-btn"
            (click)="downloadResource(resource, $event)"
            title="TÃ©lÃ©charger">
            ğŸ“¥
          </button>
          <button
            class="action-btn delete-btn"
            (click)="deleteResource(resource, $event)"
            title="Supprimer">
            ğŸ—‘ï¸
          </button>
        </div>

        <!-- Indicateur derniÃ¨re ouverture -->
        <div *ngIf="resource.lastOpened" class="last-opened">
          Ouvert rÃ©cemment
        </div>

      </article>

    </div>

  </div>

  <!-- ========================================== -->
  <!-- SECTION LIENS UTILES -->
  <!-- ========================================== -->
  <section class="useful-links">
    <div class="links-header">
      <h2>ğŸ”— Liens utiles</h2>
      <button class="add-link-btn" (click)="openAddLinkModal()">
        <span>+</span> Ajouter un lien
      </button>
    </div>

    <div class="links-grid">
      <!-- Liens dynamiques -->
      <div
        *ngFor="let link of usefulLinks"
        class="link-card"
        (click)="openLink(link)">
        <span class="link-icon">{{ link.icon }}</span>
        <div class="link-info">
          <h3>{{ link.title }}</h3>
          <p>{{ link.description }}</p>
        </div>
        <button
          class="delete-link-btn"
          (click)="deleteLink(link, $event)"
          title="Supprimer">
          ğŸ—‘ï¸
        </button>
        <span class="link-arrow">â†’</span>
      </div>

      <!-- Message si aucun lien -->
      <div *ngIf="usefulLinks.length === 0" class="no-links">
        <p>Aucun lien. Cliquez sur "Ajouter un lien" pour en crÃ©er.</p>
      </div>
    </div>
  </section>

  <!-- ========================================== -->
  <!-- MODAL AJOUT LIEN -->
  <!-- ========================================== -->
  <div class="link-modal-overlay" *ngIf="showAddLinkModal" (click)="closeAddLinkModal()">
    <div class="link-modal" (click)="$event.stopPropagation()">
      <div class="link-modal-header">
        <h3>ğŸ”— Ajouter un lien</h3>
        <button class="close-btn" (click)="closeAddLinkModal()">âœ•</button>
      </div>

      <div class="link-modal-body">
        <div class="form-group">
          <label>Titre *</label>
          <input
            type="text"
            [(ngModel)]="newLink.title"
            placeholder="Ex: Documentation Angular">
        </div>

        <div class="form-group">
          <label>URL *</label>
          <input
            type="url"
            [(ngModel)]="newLink.url"
            placeholder="https://exemple.com">
        </div>

        <div class="form-group">
          <label>Description</label>
          <input
            type="text"
            [(ngModel)]="newLink.description"
            placeholder="Courte description du lien">
        </div>

        <div class="form-group">
          <label>IcÃ´ne (emoji)</label>
          <input
            type="text"
            [(ngModel)]="newLink.icon"
            placeholder="ğŸ”—"
            maxlength="2">
        </div>
      </div>

      <div class="link-modal-footer">
        <button class="btn-cancel" (click)="closeAddLinkModal()">Annuler</button>
        <button class="btn-save" (click)="saveNewLink()">Ajouter</button>
      </div>
    </div>
  </div>

  <!-- ========================================== -->
  <!-- MODAL UPLOAD PDF -->
  <!-- ========================================== -->
  <app-pdf-upload-modal
    *ngIf="showUploadModal"
    (close)="closeUploadModal()"
    (uploaded)="onPdfUploaded($event)">
  </app-pdf-upload-modal>

  <!-- ========================================== -->
  <!-- MODAL RESUME PDF (IA) -->
  <!-- ========================================== -->
  <app-pdf-summary-modal
    *ngIf="showSummaryModal && resourceForSummary"
    [resource]="resourceForSummary"
    (close)="closeSummaryModal()"
    (summarySaved)="onSummarySaved($event)">
  </app-pdf-summary-modal>

  <!-- ========================================== -->
  <!-- MODAL EXTRACTION D'EXERCICES -->
  <!-- ========================================== -->
  <app-exercise-extractor-modal
    *ngIf="showExerciseExtractorModal && resourceForExercises"
    [resource]="{
      id: resourceForExercises.id,
      title: resourceForExercises.title,
      path: resourceForExercises.path,
      category: resourceForExercises.category
    }"
    (close)="closeExerciseExtractorModal()"
    (exercisesSaved)="onExercisesSaved($event)">
  </app-exercise-extractor-modal>

</div>

<!--
  RÃ©flexions UX (style David J. Malan)
  ====================================

  1. POURQUOI une grille plutÃ´t qu'une liste ?

     SCANABILITÃ‰ :
     En grille, l'Å“il peut scanner plus rapidement.
     On voit plus de documents en un coup d'Å“il.

     Pour une bibliothÃ¨que, c'est important :
     tu cherches souvent visuellement.

  2. POURQUOI les badges de catÃ©gorie colorÃ©s ?

     RECONNAISSANCE INSTANTANÃ‰E :
     - Bleu = AlgÃ¨bre
     - Violet = Algo
     - Vert = Java

     Sans lire, tu sais dÃ©jÃ  de quoi parle le document.

  3. POURQUOI les mÃ©tadonnÃ©es (pages, taille) ?

     GESTION DES ATTENTES :
     "Ce PDF fait 50 pages... j'ai le temps pour Ã§a maintenant ?"

     Ã‡a aide Ã  planifier sa session d'Ã©tude.

  4. POURQUOI la section "Liens utiles" ?

     OUVERTURE sur l'Ã©cosystÃ¨me :
     L'apprentissage ne s'arrÃªte pas aux PDFs du cours.

     Ces liens sont des portes vers des ressources
     complÃ©mentaires de qualitÃ©.
-->
