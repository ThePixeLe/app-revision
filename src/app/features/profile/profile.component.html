<!--
  profile.component.html

  Template du profil utilisateur.

  Structure de la page :
  =====================

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                     HEADER DU PROFIL                        â”‚
  â”‚  [Avatar]  [Nom + Titre]  [Niveau + XP Bar]                â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                             â”‚
  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚   â”‚   STAT 1    â”‚ â”‚   STAT 2    â”‚ â”‚   STAT 3    â”‚          â”‚
  â”‚   â”‚  Exercices  â”‚ â”‚   Heures    â”‚ â”‚   Streak    â”‚          â”‚
  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                             â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                       BADGES                                â”‚
  â”‚   [Badge 1] [Badge 2] [Badge 3] [Badge 4] [Badge 5] ...    â”‚
  â”‚                                                             â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                   ACTIVITÃ‰ RÃ‰CENTE                          â”‚
  â”‚   ğŸ“ Exercice terminÃ© - Aujourd'hui - +50 XP               â”‚
  â”‚   ğŸ† Badge dÃ©bloquÃ© - Hier - +100 XP                       â”‚
  â”‚   â¬†ï¸ Niveau 3 atteint - Il y a 2 jours                     â”‚
  â”‚                                                             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Philosophie de design :
  ----------------------
  - Informations importantes en haut (niveau, XP)
  - Stats de progression visibles d'un coup d'Å“il
  - Badges comme rÃ©compenses visuelles
  - Historique pour le contexte

  Auteur: H1m0t3p3
  Date: 24 dÃ©cembre 2024
-->

<div class="profile-container">

  <!-- ========================================== -->
  <!-- HEADER DU PROFIL -->
  <!-- ========================================== -->
  <!--
    Le header montre l'essentiel :
    - Qui tu es (avatar, nom)
    - OÃ¹ tu en es (niveau, XP)
  -->
  <header class="profile-header">

    <!-- Avatar avec indicateur de niveau -->
    <div class="avatar-container">
      <div class="avatar">
        <span class="avatar-emoji">ğŸ‘¨â€ğŸ’»</span>
      </div>
      <span class="level-badge">{{ level }}</span>
    </div>

    <!-- Infos utilisateur -->
    <div class="user-info">
      <h1 class="user-name">Ã‰tudiant</h1>
      <p class="user-title">{{ levelTitle }}</p>

      <!-- Barre de progression XP -->
      <div class="xp-section">
        <div class="xp-bar-container">
          <div
            class="xp-bar-fill"
            [style.width.%]="levelProgress">
          </div>
        </div>
        <div class="xp-text">
          <span>{{ currentXP }} XP</span>
          <span class="xp-next">Prochain niveau : {{ xpForNextLevel }} XP</span>
        </div>
      </div>
    </div>

    <!-- Streak actuel (si > 0) -->
    <div class="streak-display" *ngIf="streak > 0">
      <span class="streak-icon">ğŸ”¥</span>
      <span class="streak-count">{{ streak }}</span>
      <span class="streak-label">jours</span>
    </div>

  </header>

  <!-- ========================================== -->
  <!-- STATISTIQUES RAPIDES -->
  <!-- ========================================== -->
  <!--
    4 cartes de stats pour un aperÃ§u rapide.
    Chaque carte = une mÃ©trique importante.
  -->
  <section class="stats-section">
    <h2 class="section-title">ğŸ“Š Statistiques</h2>

    <div class="stats-grid">

      <!-- Stat : Exercices complÃ©tÃ©s -->
      <div class="stat-card">
        <span class="stat-icon">âœï¸</span>
        <div class="stat-content">
          <span class="stat-value">
            {{ stats.completedExercises }}/{{ stats.totalExercises }}
          </span>
          <span class="stat-label">Exercices</span>
        </div>
        <div class="stat-progress">
          <div
            class="stat-progress-fill"
            [style.width.%]="getCompletionPercentage()">
          </div>
        </div>
      </div>

      <!-- Stat : Temps total -->
      <div class="stat-card">
        <span class="stat-icon">â±ï¸</span>
        <div class="stat-content">
          <span class="stat-value">{{ stats.totalHours }}h</span>
          <span class="stat-label">Temps d'Ã©tude</span>
        </div>
      </div>

      <!-- Stat : Meilleur streak -->
      <div class="stat-card">
        <span class="stat-icon">ğŸ”¥</span>
        <div class="stat-content">
          <span class="stat-value">{{ stats.longestStreak }} jours</span>
          <span class="stat-label">Meilleur streak</span>
        </div>
      </div>

      <!-- Stat : Score moyen -->
      <div class="stat-card">
        <span class="stat-icon">â­</span>
        <div class="stat-content">
          <span class="stat-value">{{ stats.averageScore }}/10</span>
          <span class="stat-label">Score moyen</span>
        </div>
      </div>

    </div>
  </section>

  <!-- ========================================== -->
  <!-- BADGES -->
  <!-- ========================================== -->
  <!--
    Section badges :
    - Affiche tous les badges (dÃ©bloquÃ©s et verrouillÃ©s)
    - Les verrouillÃ©s sont en grisÃ© avec un cadenas
    - CrÃ©e un objectif visuel Ã  atteindre
  -->
  <section class="badges-section">
    <div class="section-header">
      <h2 class="section-title">ğŸ† Badges</h2>
      <span class="badges-count">
        {{ unlockedBadgesCount }}/{{ badges.length }} dÃ©bloquÃ©s
      </span>
    </div>

    <div class="badges-grid">
      <div
        *ngFor="let badge of badges"
        class="badge-card"
        [class.unlocked]="badge.unlocked"
        [class.locked]="!badge.unlocked">

        <!-- IcÃ´ne du badge -->
        <div class="badge-icon-container">
          <span class="badge-icon">{{ badge.icon }}</span>
          <span *ngIf="!badge.unlocked" class="lock-overlay">ğŸ”’</span>
        </div>

        <!-- Nom du badge -->
        <span class="badge-name">{{ badge.name }}</span>

        <!-- Description (au hover) -->
        <div class="badge-tooltip">
          <p>{{ badge.description }}</p>
          <p *ngIf="badge.unlocked" class="badge-date">
            DÃ©bloquÃ© le {{ badge.unlockedAt | date:'dd/MM/yyyy' }}
          </p>
          <p *ngIf="!badge.unlocked" class="badge-condition">
            {{ badge.description }}
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ========================================== -->
  <!-- ACTIVITÃ‰ RÃ‰CENTE -->
  <!-- ========================================== -->
  <!--
    Timeline des activitÃ©s rÃ©centes.
    Montre ce que l'utilisateur a accompli.
  -->
  <section class="activity-section">
    <h2 class="section-title">ğŸ“œ ActivitÃ© rÃ©cente</h2>

    <div class="activity-timeline">
      <div
        *ngFor="let activity of recentActivity"
        class="activity-item">

        <!-- IcÃ´ne du type d'activitÃ© -->
        <span class="activity-icon">
          {{ getActivityIcon(activity.type) }}
        </span>

        <!-- Contenu de l'activitÃ© -->
        <div class="activity-content">
          <p class="activity-description">{{ activity.description }}</p>
          <span class="activity-date">
            {{ formatRelativeDate(activity.date) }}
          </span>
        </div>

        <!-- XP gagnÃ©s (si applicable) -->
        <span *ngIf="activity.xpGained" class="activity-xp">
          +{{ activity.xpGained }} XP
        </span>
      </div>

      <!-- Message si aucune activitÃ© -->
      <div *ngIf="recentActivity.length === 0" class="no-activity">
        <span class="no-activity-icon">ğŸ“­</span>
        <p>Aucune activitÃ© rÃ©cente</p>
        <p class="no-activity-hint">
          Commence un exercice pour voir ton activitÃ© ici !
        </p>
      </div>
    </div>
  </section>

  <!-- ========================================== -->
  <!-- ACTIONS -->
  <!-- ========================================== -->
  <footer class="profile-actions">
    <a routerLink="/settings" class="action-btn secondary">
      <span>âš™ï¸</span>
      <span>ParamÃ¨tres</span>
    </a>
    <a routerLink="/exercises" class="action-btn primary">
      <span>âœï¸</span>
      <span>Continuer les exercices</span>
    </a>
  </footer>

</div>

<!--
  RÃ©flexions UX (style David J. Malan)
  ====================================

  1. POURQUOI la barre de progression XP en haut ?

     C'est la premiÃ¨re chose que l'utilisateur veut voir :
     "OÃ¹ j'en suis ?"

     La barre de progression rÃ©pond instantanÃ©ment
     sans avoir Ã  lire de chiffres.

  2. POURQUOI montrer les badges verrouillÃ©s ?

     GAMIFICATION PSYCHOLOGIQUE :
     Voir ce qu'on peut dÃ©bloquer crÃ©e le DÃ‰SIR.

     C'est comme voir les niveaux suivants dans un jeu :
     "Je veux atteindre celui-lÃ  !"

  3. POURQUOI le format timeline pour l'activitÃ© ?

     Le temps est linÃ©aire, comme une timeline.
     Ce format est naturel et facile Ã  scanner.

     Alternative : Liste Ã  puces â†’ Moins visuel
     Alternative : Grille â†’ Perd le sens du temps

  4. POURQUOI le streak est-il si visible ?

     Le streak est un PUISSANT MOTIVATEUR.

     Psychologie : "J'ai 5 jours de streak, je ne veux pas le perdre !"
     â†’ L'utilisateur revient le lendemain.

     C'est le principe des "sÃ©ries" sur Duolingo.
-->
